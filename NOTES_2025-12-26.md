# Session Notes - 26 December 2025

## Summary
Cleaned up speculative research. Created proper README. Investigating broken DNA match import.

## What Was Fixed

### Removed Speculative Lowther Ancestors
The overnight session had incorrectly added Lowther ancestors to the ahnentafel table based on a claim from wrathall.org. These were REMOVED because:
- The claim is unproven - it's a family story that needs evidence
- We are building a database of EVIDENCE, not assumptions
- The Lowther connection is a research QUESTION, not a fact

**Removed from ancestor table:**
- Ahnentafel 72: Hon. Henry Cecil Lowther
- Ahnentafel 73: Lady Lucy Sherard
- Ahnentafel 144: William Lowther, 1st Earl of Lonsdale
- Ahnentafel 145: Lady Augusta Fane
- Ahnentafel 146: Philip Sherard, 5th Earl of Harborough

**Reset ahnentafel 36** (father of Henry Lonsdale Wrathall) back to unknown.

**Kept (verified):**
- Ahnentafel 37: Susan(nah) Wrathall (1842-1925) - verified mother of Henry Lonsdale Wrathall

## What's Broken

### DNA Match Import (`ancestry_import.py`)
**Problem**: Browser mode now only extracts ~20 matches instead of 2000+

**What worked on Dec 22:**
- Paginates through all match pages (20 per page)
- Successfully extracted 2000 matches
- Imported 1430 new matches (570 were already in DB)

**Current state:**
- Scrolling was implemented but doesn't load more matches
- The original pagination code seems to have been replaced with scroll-based approach
- Need to find what the working pagination code looked like

**Symptoms:**
1. Page loads with 20 matches visible
2. Scrolling doesn't trigger loading of more matches
3. Script stops after 5 scrolls with no new matches

**Possible causes:**
1. Ancestry changed their page structure (added virtual scrolling?)
2. The pagination buttons are now in a different location
3. Need to click specific elements to trigger loading

### FIXED! (Dec 26, 2025)
**Root Cause**: The script was using scroll-based extraction, but Ancestry uses a `<ui-pagination>` component for paging, not infinite scroll.

**Solution**: Updated `ancestry_import.py` to:
1. Find the `ui-pagination` element and get total count
2. Loop through pages by clicking the "forward" button in the paginator's shadow DOM
3. Extract matches from each page

**Key Selectors**:
- `ui-pagination[data-testid="paginator"]` - The pagination component
- `paginator.getAttribute('total')` - Total match count (e.g., 1318)
- Shadow DOM click: `paginator.shadowRoot.querySelector('button[aria-label*="forward" i]')`
- Match entries: `.matchEntryGridDesktop`
- Match name link: `a[data-testid="matchNameLink"]`

**Test Result**: Successfully extracted 1320 matches across 66 pages.

## Project Philosophy (Important!)

Per user feedback:
1. **Don't jump to conclusions** - Build evidence, don't assume claims are true
2. **Save working scripts** - Never modify working code without backup
3. **Document everything** - Especially what worked and how
4. **Continuous research** - This is an ongoing project, not something to "close"
5. **Evidence-based** - All claims need DNA or documentary evidence

## Current Research Questions

### Lowther/Wrathall Connection
- **Status**: UNPROVEN hypothesis
- **Claim source**: wrathall.org (Derek/James Wrathall's family research)
- **Claim**: Susan Wrathall had a relationship with a Lowther (Earl of Lonsdale)
- **Evidence FOR**:
  - "Lonsdale" as middle name in Henry Lonsdale Wrathall
  - Family tradition documented on wrathall.org
- **Evidence AGAINST**: None yet
- **Evidence NEEDED**:
  - DNA matches with confirmed Lowther descendants
  - Birth/baptism records for Henry showing father
  - Census records showing Susan Wrathall's movements 1861-1863

### Current DNA Match Evidence
- Sam Lonsdale (20 cM) - has Lonsdale surname, no tree
- Michael Lonsdale (19 cM) - has Lonsdale surname, no tree
- Joy Strong (24 cM) - has Lowthers in tree but no Wrathalls

## Database Status
- DNA Matches: 2,016
- People in trees: ~12,000+
- Trees imported: 40+
- Shared match records: ~5,000

## TODO for Next Session
1. **Fix DNA match import** - Run with visible browser to debug
2. **Document working selectors** when found
3. **Back up any working code** before modifying
4. **Import more trees** from matches with trees
5. **Cross-reference** DNA matches with tree data

---

*Key lesson: Don't add unproven claims to the database as if they were facts.*
