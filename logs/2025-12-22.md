# Session Notes - 22 December 2025

## Summary
Built Playwright browser automation to scrape ALL DNA matches from Ancestry (bypassing 200-match API limit).

## What Was Done

### 1. API Investigation
- Confirmed Ancestry API hard-limits results to 200 matches
- All pagination parameters (page, offset, bookmark, etc.) are ignored
- The `/dna/secure` endpoint is deprecated (404)

### 2. Playwright Browser Automation
Added `--browser` mode to `ancestry_import.py`:
- Uses browser_cookie3 to extract Chrome cookies
- Launches Playwright with cookies injected
- Paginates through all match pages (20 per page)
- Extracts: name, cM, relationship, side (paternal/maternal/both), GUID

### 3. Import Results
```
Total extracted: 2000 matches
New imports:     1430
Skipped:         570 (already in DB from yesterday)
Total in DB:     2015
```

## Usage

```bash
# Close Chrome first, then:
source venv/bin/activate
python ancestry_import.py --browser
```

Options:
- `--browser` - Use Playwright to scrape all matches
- `--headless` - Run browser invisibly
- `--shared NAME` - Get shared matches for a specific match
- `--explore` - Debug API endpoints

### 4. Shared Matches Feature
Added `--shared` flag to fetch shared DNA matches:
```bash
python ancestry_import.py --shared "Bruce Horrocks"
```
Shows who you BOTH share DNA with, including:
- Your cM with each shared match
- Their cM with each shared match
- Side (paternal/maternal/both)

## Database Status
- **2015 DNA matches** now in database
- Fields: name, shared_cm, predicted_relationship, match_side, ancestry_id

## Key Matches (from yesterday's notes)
| Match | cM | Side | Notes |
|-------|-----|------|-------|
| Rebecca Hyndman | 2699 | both | Sister |
| Bruce Horrocks | 605 | paternal | 1st cousin |
| Toby Yates | 466 | both | Close - investigate! |
| Rachel Wrathall | 38 | unknown | Wrathall connection |

## Shared Match Analysis

### Toby Yates (466 cM) - Key Findings
Shared matches reveal Toby is likely on the PATERNAL line:
| Shared With | You cM | Toby cM | Notes |
|------------|--------|---------|-------|
| Bruce Horrocks | 605 | 368 | **Paternal** - confirms paternal line |
| Rachel Wrathall | 38 | **111** | Shares MORE with Toby than you! |

### Rachel Wrathall Connection
- Only 38 cM with you
- 22 cM with Rebecca (sister)
- **111 cM with Toby Yates** - significant!
- Suggests Wrathall connection may be through Toby's specific line

## Full Cluster Analysis (Shared Match Matrix)

### PATERNAL MAIN BRANCH
| Match | Your cM | Key Connections |
|-------|---------|-----------------|
| Bruce Horrocks | 605 | Central - connects to Toby, Emily, Kate |
| Toby Yates | 466 | 368 cM with Bruce, 111 cM with Rachel Wrathall |
| Emily Hine | 134 | 109 cM with Bruce, 307 cM with Kate Ellis |
| Kate Ellis | 42 | Bridges Bruce (127 cM) â†” Emily (307 cM) |

### LIGHTFOOT/BRAMMER SUB-CLUSTER
| Match | Your cM | Their Network |
|-------|---------|---------------|
| Bruce Lightfoot | 119 | 162 cM with Helen, 241 cM with Fishwick |
| Helen Brammer | 113 | 162 cM with Bruce L, 124 cM with Fishwick |
| Alexander Fishwick | 16 | **Key connector**: 403 cM Rachel Wrathall, 241 cM Bruce L |
| Rachel Wrathall | 38 | Much closer to Fishwick (403 cM) than to you |

### ISOLATED BRANCHES
| Match | Your cM | Notes |
|-------|---------|-------|
| jane_gessler | 126 | NO cross-connections! 342 cM with Angela Ganley |
| Angela Ganley | 70 | Close to jane_gessler, separate branch |
| Brenda Davey | 101 | Has siblings (Katrina Barnes 1612 cM, Alexander Lloyd 1482 cM) you barely match |

### ðŸŽ‰ CONFIRMED: Wrathall Ancestors Found!
**Via Helen Brammer (113 cM) - Common ancestors identified by Ancestry:**

| Ancestor | Relationship | Years |
|----------|--------------|-------|
| **Henry L Wrathall** | 2nd great-grandfather | 1863-1927 |
| **Mary Alice Metcalfe** | 2nd great-grandmother | 1867-1948 |

Helen Brammer is your **2nd cousin 1x removed** through this couple.

The Lightfoot/Brammer/Fishwick cluster all descend from the Wrathall line!
- Rachel Wrathall (38 cM) shares 403 cM with Alexander Fishwick
- This explains the Wrathall surname connections

## Complete Cluster Map

### PATERNAL: Wrathall/Horrocks Line
- Bruce Horrocks (605 cM), Toby Yates (466 cM), Helen Brammer (113 cM)
- Confirmed ancestor: Henry Lonsdale Wrathall (1863-1927) + Mary Alice Metcalfe

### PATERNAL: Wood Family
- geri_wood (48 cM) + siblings Jed/Ryan/Travis/Ethan Wood (all 3480+ cM with each other)
- Distinct paternal cluster

### PATERNAL(?): Emily Hine / Kate Ellis
- Emily Hine (134 cM), Kate Ellis (42 cM)
- Kate bridges Bruce Horrocks â†” Emily Hine
- May be same as Wrathall line or parallel

### MATERNAL: Gessler/Ganley Cluster (ISOLATED)
- jane_gessler (126 cM) - NO cross-connections to paternal!
- Angela Ganley (70 cM) - 342 cM with jane
- Steven Coucill (27 cM), Frame family (maternal markers)

### DISTANT: Davey Branch
- Brenda Davey (101 cM) - siblings share 1400-1600 cM with her, only 22-39 cM with you

## Woods, Heywoods & Tarts Investigation

### Wood Cluster (Paternal)
- geri_wood (48 cM) + siblings Jed, Ryan, Travis, Ethan (3480+ cM with each other)
- All marked **paternal** - likely Bolton John Wood (1840) line
- Peter Wood (15 cM) is DIFFERENT branch (no overlap with geri cluster)

### Tart Connection Found!
- **Neil Farnworth (90 cM)** - has TART as shared surname in his tree!
- Farnworth is where your Tarts lived (Farnworth, Lancashire)
- Likely descends from James Tart Sr (1842) / Matilda Tart line

### Heywood
- Samuel Heywood (1870) married Theodora TART (1888) - connects families
- No DNA matches with Heywood surname found yet

## TODO for Next Session
1. **Toby Yates (466 cM)** - no tree connection found yet, investigate
2. **jane_gessler** - identify maternal surname (Gessler? Ganley? Frame?)
3. **Neil Farnworth** - investigate Tart connection in his tree
4. Link matches to person table where known
